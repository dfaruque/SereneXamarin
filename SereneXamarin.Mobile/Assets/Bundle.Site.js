function _init(){"use strict"
$.AdminLTE.layout={activate:function(){var e=this
e.fix(),e.fixSidebar(),$("body, html, .wrapper").css("height","auto"),$(window,".wrapper").resize(function(){e.fix(),e.fixSidebar()})},fix:function(){$(".layout-boxed > .wrapper").css("overflow","hidden")
var e=$(".main-header").outerHeight()+$(".main-footer").outerHeight(),i=$(window).height(),o=$(".sidebar").height()
if($("body").hasClass("fixed"))$(".content-wrapper, .right-side").css("min-height",i-$(".main-footer").outerHeight())
else{var n
i>=o?($(".content-wrapper, .right-side").css("min-height",i-e),n=i-e):($(".content-wrapper, .right-side").css("min-height",o),n=o)
var t=$($.AdminLTE.options.controlSidebarOptions.selector)
void 0!==t&&t.height()>n&&$(".content-wrapper, .right-side").css("min-height",t.height())}},fixSidebar:function(){return $("body").hasClass("fixed")?(void 0===$.fn.slimScroll&&window.console&&window.console.error("Error: the fixed layout requires the slimscroll plugin!"),$.AdminLTE.options.sidebarSlimScroll&&void 0!==$.fn.slimScroll&&($(".sidebar-menu").slimScroll({destroy:!0}).height("auto"),$(".sidebar-menu").slimscroll({height:$(window).height()-$(".main-header").height()-($(".sidebar-form").outerHeight(!0)||0)+"px",color:"rgba(0,0,0,0.2)",size:"3px"})),void window.setTimeout(function(){$(window).triggerHandler("layout")},500)):void(void 0!==$.fn.slimScroll&&$(".sidebar-menu").slimScroll({destroy:!0}).height("auto"))}},$.AdminLTE.pushMenu={activate:function(e){var i=$.AdminLTE.options.screenSizes
$(document).on("click",e,function(e){e.preventDefault(),$(window).width()>i.sm-1?$("body").hasClass("sidebar-collapse")?$("body").removeClass("sidebar-collapse").trigger("expanded.pushMenu"):$("body").addClass("sidebar-collapse").trigger("collapsed.pushMenu"):$("body").hasClass("sidebar-open")?$("body").removeClass("sidebar-open").removeClass("sidebar-collapse").trigger("collapsed.pushMenu"):$("body").addClass("sidebar-open").trigger("expanded.pushMenu")}),$(".content-wrapper").click(function(){$(window).width()<=i.sm-1&&$("body").hasClass("sidebar-open")&&$("body").removeClass("sidebar-open")}),($.AdminLTE.options.sidebarExpandOnHover||$("body").hasClass("fixed")&&$("body").hasClass("sidebar-mini"))&&this.expandOnHover()},expandOnHover:function(){var e=this,i=$.AdminLTE.options.screenSizes.sm-1
$(".main-sidebar").hover(function(){$("body").hasClass("sidebar-mini")&&$("body").hasClass("sidebar-collapse")&&$(window).width()>i&&e.expand()},function(){$("body").hasClass("sidebar-mini")&&$("body").hasClass("sidebar-expanded-on-hover")&&$(window).width()>i&&e.collapse()})},expand:function(){$("body").removeClass("sidebar-collapse").addClass("sidebar-expanded-on-hover")},collapse:function(){$("body").hasClass("sidebar-expanded-on-hover")&&$("body").removeClass("sidebar-expanded-on-hover").addClass("sidebar-collapse")}},$.AdminLTE.tree=function(e){var i=this,o=$.AdminLTE.options.animationSpeed
$(document).off("click",e+" li a").on("click",e+" li a",function(e){var n=$(this),t=n.next()
if(t.is(".treeview-menu")&&t.is(":visible")&&!$("body").hasClass("sidebar-collapse"))t.slideUp(o,function(){t.removeClass("menu-open")}),t.parent("li").removeClass("active")
else if(t.is(".treeview-menu")&&!t.is(":visible")){var s=n.parents("ul").first(),a=s.find("ul:visible").slideUp(o)
a.removeClass("menu-open")
var r=n.parent("li")
t.slideDown(o,function(){t.addClass("menu-open"),s.find("li.active").removeClass("active"),r.addClass("active"),i.layout.fix()})}t.is(".treeview-menu")&&e.preventDefault()})},$.AdminLTE.controlSidebar={activate:function(){var e=this,i=$.AdminLTE.options.controlSidebarOptions,o=$(i.selector),n=$(i.toggleBtnSelector)
n.on("click",function(n){n.preventDefault(),o.hasClass("control-sidebar-open")||$("body").hasClass("control-sidebar-open")?e.close(o,i.slide):e.open(o,i.slide)})
var t=$(".control-sidebar-bg")
e._fix(t),$("body").hasClass("fixed")?e._fixForFixed(o):$(".content-wrapper, .right-side").height()<o.height()&&e._fixForContent(o)},open:function(e,i){i?e.addClass("control-sidebar-open"):$("body").addClass("control-sidebar-open")},close:function(e,i){i?e.removeClass("control-sidebar-open"):$("body").removeClass("control-sidebar-open")},_fix:function(e){var i=this
if($("body").hasClass("layout-boxed")){if(e.css("position","absolute"),e.height($(".wrapper").height()),i.hasBindedResize)return
$(window).resize(function(){i._fix(e)}),i.hasBindedResize=!0}else e.css({position:"fixed",height:"auto"})},_fixForFixed:function(e){e.css({position:"fixed","max-height":"100%",overflow:"auto","padding-bottom":"50px"})},_fixForContent:function(e){$(".content-wrapper, .right-side").css("min-height",e.height())}},$.AdminLTE.boxWidget={selectors:$.AdminLTE.options.boxWidgetOptions.boxWidgetSelectors,icons:$.AdminLTE.options.boxWidgetOptions.boxWidgetIcons,animationSpeed:$.AdminLTE.options.animationSpeed,activate:function(e){var i=this
e||(e=document),$(e).on("click",i.selectors.collapse,function(e){e.preventDefault(),i.collapse($(this))}),$(e).on("click",i.selectors.remove,function(e){e.preventDefault(),i.remove($(this))})},collapse:function(e){var i=this,o=e.parents(".box").first(),n=o.find("> .box-body, > .box-footer, > form  >.box-body, > form > .box-footer")
o.hasClass("collapsed-box")?(e.children(":first").removeClass(i.icons.open).addClass(i.icons.collapse),n.slideDown(i.animationSpeed,function(){o.removeClass("collapsed-box")})):(e.children(":first").removeClass(i.icons.collapse).addClass(i.icons.open),n.slideUp(i.animationSpeed,function(){o.addClass("collapsed-box")}))},remove:function(e){var i=e.parents(".box").first()
i.slideUp(this.animationSpeed)}}}if("undefined"==typeof jQuery)throw Error("AdminLTE requires jQuery")
$.AdminLTE={},$.AdminLTE.options={navbarMenuSlimscroll:!0,navbarMenuSlimscrollWidth:"3px",navbarMenuHeight:"200px",animationSpeed:500,sidebarToggleSelector:"[data-toggle='offcanvas']",sidebarPushMenu:!0,sidebarSlimScroll:!0,sidebarExpandOnHover:!1,enableBoxRefresh:!0,enableBSToppltip:!0,BSTooltipSelector:"[data-toggle='tooltip']",enableFastclick:!1,enableControlSidebar:!0,controlSidebarOptions:{toggleBtnSelector:"[data-toggle='control-sidebar']",selector:".control-sidebar",slide:!0},enableBoxWidget:!0,boxWidgetOptions:{boxWidgetIcons:{collapse:"fa-minus",open:"fa-plus",remove:"fa-times"},boxWidgetSelectors:{remove:'[data-widget="remove"]',collapse:'[data-widget="collapse"]'}},directChat:{enable:!0,contactToggleSelector:'[data-widget="chat-pane-toggle"]'},colors:{lightBlue:"#3c8dbc",red:"#f56954",green:"#00a65a",aqua:"#00c0ef",yellow:"#f39c12",blue:"#0073b7",navy:"#001F3F",teal:"#39CCCC",olive:"#3D9970",lime:"#01FF70",orange:"#FF851B",fuchsia:"#F012BE",purple:"#8E24AA",maroon:"#D81B60",black:"#222222",gray:"#d2d6de"},screenSizes:{xs:480,sm:768,md:992,lg:1200}},$(function(){"use strict"
$("body").removeClass("hold-transition"),"undefined"!=typeof AdminLTEOptions&&$.extend(!0,$.AdminLTE.options,AdminLTEOptions)
var e=$.AdminLTE.options
_init(),$.AdminLTE.layout.activate(),$.AdminLTE.tree(".sidebar"),e.enableControlSidebar&&$.AdminLTE.controlSidebar.activate(),e.navbarMenuSlimscroll&&void 0!==$.fn.slimscroll&&$(".navbar .menu").slimscroll({height:e.navbarMenuHeight,alwaysVisible:!1,size:e.navbarMenuSlimscrollWidth}).css("width","100%"),e.sidebarPushMenu&&$.AdminLTE.pushMenu.activate(e.sidebarToggleSelector),e.enableBSToppltip&&$("body").tooltip({selector:e.BSTooltipSelector}),e.enableBoxWidget&&$.AdminLTE.boxWidget.activate(),e.enableFastclick&&"undefined"!=typeof FastClick&&FastClick.attach(document.body),e.directChat.enable&&$(document).on("click",e.directChat.contactToggleSelector,function(){var e=$(this).parents(".direct-chat").first()
e.toggleClass("direct-chat-contacts-open")}),$('.btn-group[data-toggle="btn-toggle"]').each(function(){var e=$(this)
$(this).find(".btn").on("click",function(i){e.find(".btn.active").removeClass("active"),$(this).addClass("active"),i.preventDefault()})})}),function(e){"use strict"
e.fn.boxRefresh=function(i){function o(e){e.append(s),t.onLoadStart.call(e)}function n(e){e.find(s).remove(),t.onLoadDone.call(e)}var t=e.extend({trigger:".refresh-btn",source:"",onLoadStart:function(e){return e},onLoadDone:function(e){return e}},i),s=e('<div class="overlay"><div class="fa fa-refresh fa-spin"></div></div>')
return this.each(function(){if(""===t.source)return void(window.console&&window.console.log("Please specify a source first - boxRefresh()"))
var i=e(this),s=i.find(t.trigger).first()
s.on("click",function(e){e.preventDefault(),o(i),i.find(".box-body").load(t.source,function(){n(i)})})})}}(jQuery),function(e){"use strict"
e.fn.activateBox=function(){e.AdminLTE.boxWidget.activate(this)},e.fn.toggleBox=function(){var i=e(e.AdminLTE.boxWidget.selectors.collapse,this)
e.AdminLTE.boxWidget.collapse(i)},e.fn.removeBox=function(){var i=e(e.AdminLTE.boxWidget.selectors.remove,this)
e.AdminLTE.boxWidget.remove(i)}}(jQuery),function(e){"use strict"
e.fn.todolist=function(i){var o=e.extend({onCheck:function(e){return e},onUncheck:function(e){return e}},i)
return this.each(function(){void 0!==e.fn.iCheck?(e("input",this).on("ifChecked",function(){var i=e(this).parents("li").first()
i.toggleClass("done"),o.onCheck.call(i)}),e("input",this).on("ifUnchecked",function(){var i=e(this).parents("li").first()
i.toggleClass("done"),o.onUncheck.call(i)})):e("input",this).on("change",function(){var i=e(this).parents("li").first()
i.toggleClass("done"),e("input",i).is(":checked")?o.onCheck.call(i):o.onUncheck.call(i)})})}}(jQuery);




var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=3>o?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(3>o?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},SereneXamarin;!function(e){var t;!function(e){var t=function(t){function n(){t.apply(this,arguments),this.form=new e.LanguageForm(this.idPrefix)}return __extends(n,t),n.prototype.getFormKey=function(){return e.LanguageForm.formKey},n.prototype.getIdProperty=function(){return e.LanguageRow.idProperty},n.prototype.getLocalTextPrefix=function(){return e.LanguageRow.localTextPrefix},n.prototype.getNameProperty=function(){return e.LanguageRow.nameProperty},n.prototype.getService=function(){return e.LanguageService.baseUrl},n=__decorate([Serenity.Decorators.registerClass()],n)}(Serenity.EntityDialog);e.LanguageDialog=t}(t=e.Administration||(e.Administration={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(t){function n(e){t.call(this,e)}return __extends(n,t),n.prototype.getColumnsKey=function(){return"Administration.Language"},n.prototype.getDialogType=function(){return e.LanguageDialog},n.prototype.getIdProperty=function(){return e.LanguageRow.idProperty},n.prototype.getLocalTextPrefix=function(){return e.LanguageRow.localTextPrefix},n.prototype.getService=function(){return e.LanguageService.baseUrl},n.prototype.getDefaultSortBy=function(){return[e.LanguageRow.Fields.LanguageName]},n=__decorate([Serenity.Decorators.registerClass()],n)}(Serenity.EntityGrid);e.LanguageGrid=t}(t=e.Administration||(e.Administration={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(t){function n(){t.apply(this,arguments),this.form=new e.RoleForm(this.idPrefix)}return __extends(n,t),n.prototype.getFormKey=function(){return e.RoleForm.formKey},n.prototype.getIdProperty=function(){return e.RoleRow.idProperty},n.prototype.getLocalTextPrefix=function(){return e.RoleRow.localTextPrefix},n.prototype.getNameProperty=function(){return e.RoleRow.nameProperty},n.prototype.getService=function(){return e.RoleService.baseUrl},n.prototype.getToolbarButtons=function(){var n=this,r=t.prototype.getToolbarButtons.call(this);return r.push({title:Q.text("Site.RolePermissionDialog.EditButton"),cssClass:"edit-permissions-button",icon:"icon-lock-open text-green",onClick:function(){new e.RolePermissionDialog({roleID:n.entity.RoleId,title:n.entity.RoleName}).dialogOpen()}}),r},n.prototype.updateInterface=function(){t.prototype.updateInterface.call(this),this.toolbar.findButton("edit-permissions-button").toggleClass("disabled",this.isNewOrDeleted())},n=__decorate([Serenity.Decorators.registerClass()],n)}(Serenity.EntityDialog);e.RoleDialog=t}(t=e.Administration||(e.Administration={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(t){function n(e){t.call(this,e)}return __extends(n,t),n.prototype.getColumnsKey=function(){return"Administration.Role"},n.prototype.getDialogType=function(){return e.RoleDialog},n.prototype.getIdProperty=function(){return e.RoleRow.idProperty},n.prototype.getLocalTextPrefix=function(){return e.RoleRow.localTextPrefix},n.prototype.getService=function(){return e.RoleService.baseUrl},n.prototype.getDefaultSortBy=function(){return[e.RoleRow.Fields.RoleName]},n=__decorate([Serenity.Decorators.registerClass()],n)}(Serenity.EntityGrid);e.RoleGrid=t}(t=e.Administration||(e.Administration={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(t){function n(n){var r=this;t.call(this,n),this.permissions=new e.PermissionCheckEditor(this.byId("Permissions"),{showRevoke:!1}),e.RolePermissionService.List({RoleID:this.options.roleID,Module:null,Submodule:null},function(e){r.permissions.set_value(e.Entities.map(function(e){return{PermissionKey:e}}))})}return __extends(n,t),n.prototype.getDialogOptions=function(){var n=this,r=t.prototype.getDialogOptions.call(this);return r.buttons=[{text:Q.text("Dialogs.OkButton"),click:function(t){e.RolePermissionService.Update({RoleID:n.options.roleID,Permissions:n.permissions.get_value().map(function(e){return e.PermissionKey}),Module:null,Submodule:null},function(e){n.dialogClose(),window.setTimeout(function(){return Q.notifySuccess(Q.text("Site.RolePermissionDialog.SaveSuccess"))},0)})}},{text:Q.text("Dialogs.CancelButton"),click:function(){return n.dialogClose()}}],r.title=Q.format(Q.text("Site.RolePermissionDialog.DialogTitle"),this.options.title),r},n.prototype.getTemplate=function(){return'<div id="~_Permissions"></div>'},n=__decorate([Serenity.Decorators.registerClass()],n)}(Serenity.TemplatedDialog);e.RolePermissionDialog=t}(t=e.Administration||(e.Administration={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(t){function n(e){var n=this;t.call(this,e),this.element.on("keyup."+this.uniqueName+" change."+this.uniqueName,"input.custom-text",function(e){var t=Q.trimToNull($(e.target).val());""===t&&(t=null),n.view.getItemById($(e.target).data("key")).CustomText=t,n.hasChanges=!0})}return __extends(n,t),n.prototype.getIdProperty=function(){return"Key"},n.prototype.getLocalTextPrefix=function(){return"Administration.Translation"},n.prototype.getService=function(){return e.TranslationService.baseUrl},n.prototype.onClick=function(e,n,r){var i=this;if(t.prototype.onClick.call(this,e,n,r),!e.isDefaultPrevented()){var o,a=this.itemAt(n);return $(e.target).hasClass("source-text")?(e.preventDefault(),o=function(){a.CustomText=a.SourceText,i.view.updateItem(a.Key,a),i.hasChanges=!0},Q.isTrimmedEmpty(a.CustomText)||Q.trimToEmpty(a.CustomText)===Q.trimToEmpty(a.SourceText)?void o():void Q.confirm(Q.text("Db.Administration.Translation.OverrideConfirmation"),o)):$(e.target).hasClass("target-text")?(e.preventDefault(),o=function(){a.CustomText=a.TargetText,i.view.updateItem(a.Key,a),i.hasChanges=!0},Q.isTrimmedEmpty(a.CustomText)||Q.trimToEmpty(a.CustomText)===Q.trimToEmpty(a.TargetText)?void o():void Q.confirm(Q.text("Db.Administration.Translation.OverrideConfirmation"),o)):void 0}},n.prototype.getColumns=function(){var e=[];return e.push({field:"Key",width:300,sortable:!1}),e.push({field:"SourceText",width:300,sortable:!1,format:function(e){return Q.outerHtml($("<a/>").addClass("source-text").text(e.value||""))}}),e.push({field:"CustomText",width:300,sortable:!1,format:function(e){return Q.outerHtml($("<input/>").addClass("custom-text").attr("value",e.value).attr("type","text").attr("data-key",e.item.Key))}}),e.push({field:"TargetText",width:300,sortable:!1,format:function(e){return Q.outerHtml($("<a/>").addClass("target-text").text(e.value||""))}}),e},n.prototype.createToolbarExtensions=function(){var e=this;t.prototype.createToolbarExtensions.call(this);var n={lookupKey:"Administration.Language"};this.sourceLanguage=Serenity.Widget.create({type:Serenity.LookupEditor,element:function(t){return t.appendTo(e.toolbar.element).attr("placeholder","--- "+Q.text("Db.Administration.Translation.SourceLanguage")+" ---")},options:n}),this.sourceLanguage.changeSelect2(function(t){e.hasChanges?e.saveChanges(e.targetLanguageKey).then(function(){return e.refresh()}):e.refresh()}),this.targetLanguage=Serenity.Widget.create({type:Serenity.LookupEditor,element:function(t){return t.appendTo(e.toolbar.element).attr("placeholder","--- "+Q.text("Db.Administration.Translation.TargetLanguage")+" ---")},options:n}),this.targetLanguage.changeSelect2(function(t){e.hasChanges?e.saveChanges(e.targetLanguageKey).then(function(){return e.refresh()}):e.refresh()})},n.prototype.saveChanges=function(t){for(var n=this,r={},i=0,o=this.getItems();i<o.length;i++){var a=o[i];r[a.Key]=a.CustomText}return RSVP.resolve(e.TranslationService.Update({TargetLanguageID:t,Translations:r})).then(function(){n.hasChanges=!1,t=Q.trimToNull(t)||"invariant",Q.notifySuccess('User translations in "'+t+'" language are saved to "user.texts.'+t+'.json" file under "~/App_Data/texts/"',"")})},n.prototype.onViewSubmit=function(){var e=this.view.params;return e.SourceLanguageID=this.sourceLanguage.value,this.targetLanguageKey=this.targetLanguage.value||"",e.TargetLanguageID=this.targetLanguageKey,this.hasChanges=!1,t.prototype.onViewSubmit.call(this)},n.prototype.getButtons=function(){var e=this;return[{title:Q.text("Db.Administration.Translation.SaveChangesButton"),onClick:function(t){return e.saveChanges(e.targetLanguageKey).then(function(){return e.refresh()})},cssClass:"apply-changes-button"}]},n.prototype.createQuickSearchInput=function(){var e=this;Serenity.GridUtils.addQuickSearchInputCustom(this.toolbar.element,function(t,n){e.searchText=n,e.view.setItems(e.view.getItems(),!0)})},n.prototype.onViewFilter=function(e){function n(e){return e?e.toLowerCase().indexOf(i)>=0:!1}if(!t.prototype.onViewFilter.call(this,e))return!1;if(!this.searchText)return!0;var r=Select2.util.stripDiacritics,i=r(this.searchText).toLowerCase();return Q.isEmptyOrNull(i)||n(e.Key)||n(e.SourceText)||n(e.TargetText)||n(e.CustomText)},n.prototype.usePager=function(){return!1},n=__decorate([Serenity.Decorators.registerClass()],n)}(Serenity.EntityGrid);e.TranslationGrid=t}(t=e.Administration||(e.Administration={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){function t(t){var n=e.userDefinition;return"admin"===n.Username||!!n.Permissions[t]}Object.defineProperty(e,"userDefinition",{get:function(){return Q.getRemoteData("UserData")}}),e.hasPermission=t}(t=e.Authorization||(e.Authorization={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(t){function n(){var n=this;t.call(this),this.form=new e.UserForm(this.idPrefix),this.form.Password.addValidationRule(this.uniqueName,function(e){return n.form.Password.value.length<7?"Password must be at least 7 characters!":void 0}),this.form.PasswordConfirm.addValidationRule(this.uniqueName,function(e){return n.form.Password.value!=n.form.PasswordConfirm.value?"The passwords entered doesn't match!":void 0})}return __extends(n,t),n.prototype.getFormKey=function(){return e.UserForm.formKey},n.prototype.getIdProperty=function(){return e.UserRow.idProperty},n.prototype.getIsActiveProperty=function(){return e.UserRow.isActiveProperty},n.prototype.getLocalTextPrefix=function(){return e.UserRow.localTextPrefix},n.prototype.getNameProperty=function(){return e.UserRow.nameProperty},n.prototype.getService=function(){return e.UserService.baseUrl},n.prototype.getToolbarButtons=function(){var n=this,r=t.prototype.getToolbarButtons.call(this);return r.push({title:Q.text("Site.UserDialog.EditRolesButton"),cssClass:"edit-roles-button",icon:"icon-people text-blue",onClick:function(){new e.UserRoleDialog({userID:n.entity.UserId,username:n.entity.Username}).dialogOpen()}}),r.push({title:Q.text("Site.UserDialog.EditPermissionsButton"),cssClass:"edit-permissions-button",icon:"icon-lock-open text-green",onClick:function(){new e.UserPermissionDialog({userID:n.entity.UserId,username:n.entity.Username}).dialogOpen()}}),r},n.prototype.updateInterface=function(){t.prototype.updateInterface.call(this),this.toolbar.findButton("edit-roles-button").toggleClass("disabled",this.isNewOrDeleted()),this.toolbar.findButton("edit-permissions-button").toggleClass("disabled",this.isNewOrDeleted())},n.prototype.afterLoadEntity=function(){t.prototype.afterLoadEntity.call(this),this.form.Password.element.toggleClass("required",this.isNew()).closest(".field").find("sup").toggle(this.isNew()),this.form.PasswordConfirm.element.toggleClass("required",this.isNew()).closest(".field").find("sup").toggle(this.isNew())},n=__decorate([Serenity.Decorators.registerClass()],n)}(Serenity.EntityDialog);e.UserDialog=t}(t=e.Administration||(e.Administration={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(t){function n(e){t.call(this,e)}return __extends(n,t),n.prototype.getColumnsKey=function(){return"Administration.User"},n.prototype.getDialogType=function(){return e.UserDialog},n.prototype.getIdProperty=function(){return e.UserRow.idProperty},n.prototype.getIsActiveProperty=function(){return e.UserRow.isActiveProperty},n.prototype.getLocalTextPrefix=function(){return e.UserRow.localTextPrefix},n.prototype.getService=function(){return e.UserService.baseUrl},n.prototype.getDefaultSortBy=function(){return[e.UserRow.Fields.Username]},n=__decorate([Serenity.Decorators.registerClass()],n)}(Serenity.EntityGrid);e.UserGrid=t}(t=e.Administration||(e.Administration={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(e){function t(t,n){var r=this;e.call(this,t,n),this.rolePermissions={};var i={},o=this.getSortedGroupAndPermissionKeys(i),a=o.map(function(e){return{Key:e,ParentKey:r.getParentKey(e),Title:i[e],GrantRevoke:null,IsGroup:":"===e.charAt(e.length-1)}});this.byParentKey=Q.toGrouping(a,function(e){return e.ParentKey}),this.setItems(a)}return __extends(t,e),t.prototype.getIdProperty=function(){return"Key"},t.prototype.getItemGrantRevokeClass=function(e,t){if(!e.IsGroup)return e.GrantRevoke===t?" checked":"";var n=this.getDescendants(e,!0),r=n.filter(function(e){return e.GrantRevoke===t});return r.length?n.length===r.length?"checked":"checked partial":""},t.prototype.getItemEffectiveClass=function(e){var t=this;if(e.IsGroup){var n=this.getDescendants(e,!0),r=Q.count(n,function(e){return e.GrantRevoke===!0||null==e.GrantRevoke&&t.rolePermissions[e.Key]});return r===n.length||0===n.length?"allow":0===r?"deny":"partial"}var i=e.GrantRevoke===!0||null==e.GrantRevoke&&this.rolePermissions[e.Key];return i?" allow":" deny"},t.prototype.getColumns=function(){var e=this,t=[{name:Q.text("Site.UserPermissionDialog.Permission"),field:"Title",format:Serenity.SlickFormatting.treeToggle(function(){return e.view},function(e){return e.Key},function(t){var n=t.item,r=e.getItemEffectiveClass(n);return'<span class="effective-permission '+r+'">'+Q.htmlEncode(t.value)+"</span>"}),width:495,sortable:!1},{name:Q.text("Site.UserPermissionDialog.Grant"),field:"Grant",format:function(t){var n=t.item,r=e.getItemGrantRevokeClass(n,!0);return"<span class='check-box grant no-float "+r+"'></span>"},width:65,sortable:!1,headerCssClass:"align-center",cssClass:"align-center"}];return this.options.showRevoke&&t.push({name:Q.text("Site.UserPermissionDialog.Revoke"),field:"Revoke",format:function(t){var n=t.item,r=e.getItemGrantRevokeClass(n,!1);return'<span class="check-box revoke no-float '+r+'"></span>'},width:65,sortable:!1,headerCssClass:"align-center",cssClass:"align-center"}),t},t.prototype.setItems=function(e){Serenity.SlickTreeHelper.setIndents(e,function(e){return e.Key},function(e){return e.ParentKey},!1),this.view.setItems(e,!0)},t.prototype.onViewSubmit=function(){return!1},t.prototype.onViewFilter=function(t){var n=this;return e.prototype.onViewFilter.call(this,t)&&Serenity.SlickTreeHelper.filterById(t,this.view,function(e){return e.ParentKey})?this.searchText?this.matchContains(t)||t.IsGroup&&Q.any(this.getDescendants(t,!1),function(e){return n.matchContains(e)}):!0:!1},t.prototype.matchContains=function(e){return Select2.util.stripDiacritics(e.Title||"").toLowerCase().indexOf(this.searchText)>=0},t.prototype.getDescendants=function(e,t){for(var n=[],r=[e];r.length>0;){var i=r.pop(),o=this.byParentKey[i.Key];if(o)for(var a=0,s=o;a<s.length;a++){var u=s[a];t&&u.IsGroup||n.push(u),r.push(u)}}return n},t.prototype.onClick=function(t,n,r){if(e.prototype.onClick.call(this,t,n,r),t.isDefaultPrevented()||Serenity.SlickTreeHelper.toggleClick(t,n,r,this.view,function(e){return e.Key}),!t.isDefaultPrevented()){var i=$(t.target),o=i.hasClass("grant");if(o||i.hasClass("revoke")){t.preventDefault();var a=this.itemAt(n),s=i.hasClass("checked")||i.hasClass("partial");if(o=s?null:o!==s,a.IsGroup)for(var u=0,c=this.getDescendants(a,!0);u<c.length;u++){var l=c[u];l.GrantRevoke=o}else a.GrantRevoke=o;this.slickGrid.invalidate()}}},t.prototype.getParentKey=function(e){":"===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1));var t=e.lastIndexOf(":");return t>=0?e.substr(0,t+1):null},t.prototype.getButtons=function(){return[]},t.prototype.createToolbarExtensions=function(){var t=this;e.prototype.createToolbarExtensions.call(this),Serenity.GridUtils.addQuickSearchInputCustom(this.toolbar.element,function(e,n){t.searchText=Select2.util.stripDiacritics(Q.trimToNull(n)||"").toLowerCase(),t.view.setItems(t.view.getItems(),!0)})},t.prototype.getSortedGroupAndPermissionKeys=function(e){for(var t=Q.getRemoteData("Administration.PermissionKeys").Entities,n={},r=0,i=t;r<i.length;r++){var o=i[r],a=o;if(a&&(":"!=a.charAt(a.length-1)||(a=a.substr(0,a.length-1),0!==a.length))&&!e[a]){e[a]=Q.coalesce(Q.tryGetText("Permission."+a),a);for(var s=a.split(":"),u="",c="",l=0;l<s.length-1;l++){u=u+s[l]+":";var d=Q.tryGetText("Permission."+u);null==d&&(d=s[l]),e[u]=d,c=c+e[u]+":",n[u]=c}n[a]=c+e[a]}}return t=Object.keys(e),t=t.sort(function(e,t){return Q.turkishLocaleCompare(n[e],n[t])})},t.prototype.get_value=function(){for(var e=[],t=0,n=this.view.getItems();t<n.length;t++){var r=n[t];null!=r.GrantRevoke&&":"!=r.Key.charAt(r.Key.length-1)&&e.push({PermissionKey:r.Key,Granted:r.GrantRevoke})}return e},t.prototype.set_value=function(e){for(var t=0,n=this.view.getItems();t<n.length;t++){var r=n[t];r.GrantRevoke=null}if(null!=e)for(var i=0,o=e;i<o.length;i++){var a=o[i],s=this.view.getItemById(a.PermissionKey);s&&(s.GrantRevoke=Q.coalesce(a.Granted,!0))}this.setItems(this.getItems())},t.prototype.get_rolePermissions=function(){return Object.keys(this.rolePermissions)},t.prototype.set_rolePermissions=function(e){if(this.rolePermissions={},e)for(var t=0,n=e;t<n.length;t++){var r=n[t];this.rolePermissions[r]=!0}this.setItems(this.getItems())},t=__decorate([Serenity.Decorators.registerEditor([Serenity.IGetEditValue,Serenity.ISetEditValue])],t)}(Serenity.DataGrid);e.PermissionCheckEditor=t}(t=e.Administration||(e.Administration={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(t){function n(n){var r=this;t.call(this,n),this.permissions=new e.PermissionCheckEditor(this.byId("Permissions"),{showRevoke:!0}),e.UserPermissionService.List({UserID:this.options.userID,Module:null,Submodule:null},function(e){r.permissions.set_value(e.Entities)}),e.UserPermissionService.ListRolePermissions({UserID:this.options.userID,Module:null,Submodule:null},function(e){r.permissions.set_rolePermissions(e.Entities)})}return __extends(n,t),n.prototype.getDialogOptions=function(){var n=this,r=t.prototype.getDialogOptions.call(this);return r.buttons=[{text:Q.text("Dialogs.OkButton"),click:function(t){e.UserPermissionService.Update({UserID:n.options.userID,Permissions:n.permissions.get_value(),Module:null,Submodule:null},function(e){n.dialogClose(),window.setTimeout(function(){return Q.notifySuccess(Q.text("Site.UserPermissionDialog.SaveSuccess"))},0)})}},{text:Q.text("Dialogs.CancelButton"),click:function(){return n.dialogClose()}}],r.title=Q.format(Q.text("Site.UserPermissionDialog.DialogTitle"),this.options.username),r},n.prototype.getTemplate=function(){return'<div id="~_Permissions"></div>'},n=__decorate([Serenity.Decorators.registerClass()],n)}(Serenity.TemplatedDialog);e.UserPermissionDialog=t}(t=e.Administration||(e.Administration={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(t){function n(e){t.call(this,e)}return __extends(n,t),n.prototype.createToolbarExtensions=function(){var e=this;t.prototype.createToolbarExtensions.call(this),Serenity.GridUtils.addQuickSearchInputCustom(this.toolbar.element,function(t,n){e.searchText=Select2.util.stripDiacritics(n||"").toUpperCase(),e.view.setItems(e.view.getItems(),!0)})},n.prototype.getButtons=function(){return[]},n.prototype.getTreeItems=function(){return e.RoleRow.getLookup().items.map(function(e){return{id:e.RoleId.toString(),text:e.RoleName}})},n.prototype.onViewFilter=function(e){return t.prototype.onViewFilter.call(this,e)&&(Q.isEmptyOrNull(this.searchText)||Select2.util.stripDiacritics(e.text||"").toUpperCase().indexOf(this.searchText)>=0)},n=__decorate([Serenity.Decorators.registerEditor()],n)}(Serenity.CheckTreeEditor);e.RoleCheckEditor=t}(t=e.Administration||(e.Administration={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(t){function n(n){var r=this;t.call(this,n),this.permissions=new e.RoleCheckEditor(this.byId("Roles")),e.UserRoleService.List({UserID:this.options.userID},function(e){r.permissions.value=e.Entities.map(function(e){return e.toString()})})}return __extends(n,t),n.prototype.getDialogOptions=function(){var e=this,n=t.prototype.getDialogOptions.call(this);return n.buttons=[{text:Q.text("Dialogs.OkButton"),click:function(){Q.serviceRequest("Administration/UserRole/Update",{UserID:e.options.userID,Roles:e.permissions.value.map(function(e){return parseInt(e,10)})},function(t){e.dialogClose(),Q.notifySuccess(Q.text("Site.UserRoleDialog.SaveSuccess"))})}},{text:Q.text("Dialogs.CancelButton"),click:function(){return e.dialogClose()}}],n.title=Q.format(Q.text("Site.UserRoleDialog.DialogTitle"),this.options.username),n},n.prototype.getTemplate=function(){return"<div id='~_Roles'></div>"},n=__decorate([Serenity.Decorators.registerClass()],n)}(Serenity.TemplatedDialog);e.UserRoleDialog=t}(t=e.Administration||(e.Administration={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t=function(e){function t(){var t=this;e.call(this),this.byId("ProgressBar").progressbar({max:100,value:0,change:function(e,n){t.byId("ProgressLabel").text(t.value+" / "+t.max)}})}return __extends(t,e),Object.defineProperty(t.prototype,"max",{get:function(){return this.byId("ProgressBar").progressbar().progressbar("option","max")},set:function(e){this.byId("ProgressBar").progressbar().progressbar("option","max",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.byId("ProgressBar").progressbar("value")},set:function(e){this.byId("ProgressBar").progressbar().progressbar("value",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.element.dialog().dialog("option","title")},set:function(e){this.element.dialog().dialog("option","title",e)},enumerable:!0,configurable:!0}),t.prototype.getDialogOptions=function(){var t=this,n=e.prototype.getDialogOptions.call(this);return n.title=Q.text("Site.BasicProgressDialog.PleaseWait"),n.width=600,n.buttons=[{text:Q.text("Dialogs.CancelButton"),click:function(){t.cancelled=!0,t.element.closest(".ui-dialog").find(".ui-dialog-buttonpane .ui-button").attr("disabled","disabled").css("opacity","0.5"),t.element.dialog("option","title",Q.trimToNull(t.cancelTitle)||Q.text("Site.BasicProgressDialog.CancelTitle"))}}],n},t.prototype.initDialog=function(){e.prototype.initDialog.call(this),this.element.closest(".ui-dialog").find(".ui-dialog-titlebar-close").hide()},t.prototype.getTemplate=function(){return"<div class='s-DialogContent s-BasicProgressDialogContent'><div id='~_StatusText' class='status-text' ></div><div id='~_ProgressBar' class='progress-bar'><div id='~_ProgressLabel' class='progress-label' ></div></div></div>"},t}(Serenity.TemplatedDialog);e.BasicProgressDialog=t}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(t){var n=function(){function t(){}return t.prototype.createProgressDialog=function(){this.progressDialog=new e.BasicProgressDialog,this.progressDialog.dialogOpen(),this.progressDialog.max=this.keys.length,this.progressDialog.value=0},t.prototype.getConfirmationFormat=function(){return Q.text("Site.BulkServiceAction.ConfirmationFormat")},t.prototype.getConfirmationMessage=function(e){return Q.format(this.getConfirmationFormat(),e)},t.prototype.confirm=function(e,t){Q.confirm(this.getConfirmationMessage(e),t)},t.prototype.getNothingToProcessMessage=function(){return Q.text("Site.BulkServiceAction.NothingToProcess")},t.prototype.nothingToProcess=function(){Q.notifyError(this.getNothingToProcessMessage())},t.prototype.getParallelRequests=function(){return 1},t.prototype.getBatchSize=function(){return 1},t.prototype.startParallelExecution=function(){this.createProgressDialog(),this.successCount=0,this.errorCount=0,this.pendingRequests=0,this.completedRequests=0,this.errorCount=0,this.errorByKey={},this.queue=this.keys.slice(),this.queueIndex=0;for(var e=this.getParallelRequests();e-- >0;)this.executeNextBatch()},t.prototype.serviceCallCleanup=function(){this.pendingRequests--,this.completedRequests++;var e=Q.text(this.progressDialog.cancelled?"Site.BasicProgressDialog.CancelTitle":"Site.BasicProgressDialog.PleaseWait");e+=" (",this.successCount>0&&(e+=Q.format(Q.text("Site.BulkServiceAction.SuccessCount"),this.successCount)),this.errorCount>0&&(this.successCount>0&&(e+=", "),e+=Q.format(Q.text("Site.BulkServiceAction.ErrorCount"),this.errorCount)),this.progressDialog.title=e+")",this.progressDialog.value=this.successCount+this.errorCount,!this.progressDialog.cancelled&&this.progressDialog.value<this.keys.length?this.executeNextBatch():0===this.pendingRequests&&(this.progressDialog.dialogClose(),this.showResults(),this.done&&(this.done(),this.done=null))},t.prototype.executeForBatch=function(e){},t.prototype.executeNextBatch=function(){for(var e=this.getBatchSize(),t=[];;){if(t.length>=e)break;if(this.queueIndex>=this.queue.length)break;t.push(this.queue[this.queueIndex++])}t.length>0&&(this.pendingRequests++,this.executeForBatch(t))},t.prototype.getAllHadErrorsFormat=function(){return Q.text("Site.BulkServiceAction.AllHadErrorsFormat")},t.prototype.showAllHadErrors=function(){Q.notifyError(Q.format(this.getAllHadErrorsFormat(),this.errorCount))},t.prototype.getSomeHadErrorsFormat=function(){return Q.text("Site.BulkServiceAction.SomeHadErrorsFormat")},t.prototype.showSomeHadErrors=function(){Q.notifyWarning(Q.format(this.getSomeHadErrorsFormat(),this.successCount,this.errorCount))},t.prototype.getAllSuccessFormat=function(){return Q.text("Site.BulkServiceAction.AllSuccessFormat")},t.prototype.showAllSuccess=function(){Q.notifySuccess(Q.format(this.getAllSuccessFormat(),this.successCount))},t.prototype.showResults=function(){return 0===this.errorCount&&0===this.successCount?void this.nothingToProcess():this.errorCount>0&&0===this.successCount?void this.showAllHadErrors():this.errorCount>0?void this.showSomeHadErrors():void this.showAllSuccess()},t.prototype.execute=function(e){var t=this;return this.keys=e,0===this.keys.length?void this.nothingToProcess():void this.confirm(this.keys.length,function(){return t.startParallelExecution()})},t.prototype.get_successCount=function(){return this.successCount},t.prototype.set_successCount=function(e){this.successCount=e},t.prototype.get_errorCount=function(){return this.errorCount},t.prototype.set_errorCount=function(e){this.errorCount=e},t}();t.BulkServiceAction=n}(t=e.Common||(e.Common={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){function t(e,t){e.bind("dialogbeforeclose",function(n){Serenity.WX.hasOriginalEvent(n)&&t()&&(n.preventDefault(),Q.confirm("You have pending changes. Save them?",function(){return e.find("div.save-and-close-button").click()},{onNo:function(){e.dialog().dialog("close")}}))})}e.pendingChangesConfirmation=t}(t=e.DialogUtils||(e.DialogUtils={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(){function e(){this.allowClear=!0}return e.prototype.format=function(e){var t=Serenity.EnumTypeRegistry.get(this.enumKey),n="<select>";this.allowClear&&(n+='<option value="">',n+=Q.htmlEncode(this.emptyItemText||Q.text("Controls.SelectEditor.EmptyItemText")),n+="</option>");for(var r=0,i=Object.keys(t).filter(function(e){return!isNaN(parseInt(e,10))});r<i.length;r++){var o=i[r];n+='<option value="'+o+'"',o==e.value&&(n+=" selected");var a=t[o];n+=">",n+=Q.htmlEncode(Q.tryGetText("Enums."+this.enumKey+"."+a)||a),n+="</option>"}return n+="</select>"},__decorate([Serenity.Decorators.option()],e.prototype,"enumKey",void 0),__decorate([Serenity.Decorators.option()],e.prototype,"allowClear",void 0),__decorate([Serenity.Decorators.option()],e.prototype,"emptyItemText",void 0),e=__decorate([Serenity.Decorators.registerFormatter()],e)}();e.EnumSelectFormatter=t}(t=e.Common||(e.Common={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t;!function(e){function t(e){return{hint:Q.coalesce(e.title,"Excel"),title:Q.coalesce(e.hint,""),cssClass:"export-xlsx-button",onClick:function(){if(e.onViewSubmit()){var t=e.grid,n=Q.deepClone(t.getView().params);n.Take=0,n.Skip=0;var r=t.getView().sortBy;r&&(n.Sort=r),n.IncludeColumns=[];for(var i=t.getGrid().getColumns(),o=0,a=i;o<a.length;o++){var s=a[o];n.IncludeColumns.push(s.id||s.field)}Q.postToService({service:e.service,request:n,target:"_blank"})}},separator:e.separator}}e.createToolButton=t}(t=e.ExcelExportHelper||(e.ExcelExportHelper={}))}(t=e.Common||(e.Common={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(e){function t(t){e.call(this,t),this.nextId=1}return __extends(t,e),t.prototype.getIdProperty=function(){return"__id"},t.prototype.id=function(e){return e[this.getIdProperty()]},t.prototype.getNextId=function(){return"`"+this.nextId++},t.prototype.setNewId=function(e){e[this.getIdProperty()]=this.getNextId()},t.prototype.save=function(e,t){var n=this,r=e.request,i=Q.deepClone(r.Entity),o=this.id(i);if(null==o&&(i[this.getIdProperty()]=this.getNextId()),this.validateEntity(i,o)){var a=this.view.getItems().slice();if(null==o)a.push(i);else{var s=Q.indexOf(a,function(e){return n.id(e)===o});a[s]=Q.deepClone({},a[s],i)}this.setEntities(a),t({})}},t.prototype.deleteEntity=function(e){return this.view.deleteItem(e),!0},t.prototype.validateEntity=function(e,t){return!0},t.prototype.setEntities=function(e){this.view.setItems(e,!0)},t.prototype.getNewEntity=function(){return{}},t.prototype.getButtons=function(){var e=this;return[{title:this.getAddButtonCaption(),cssClass:"add-button",onClick:function(){e.createEntityDialog(e.getItemType(),function(t){var n=t;n.onSave=function(t,n){return e.save(t,n)},n.loadEntityAndOpenDialog(e.getNewEntity())})}}]},t.prototype.editItem=function(e){var t=this,n=e,r=this.view.getItemById(n);this.createEntityDialog(this.getItemType(),function(e){var i=e;i.onDelete=function(e,r){t.deleteEntity(n)&&r({})},i.onSave=function(e,n){return t.save(e,n)},i.loadEntityAndOpenDialog(r)})},t.prototype.getEditValue=function(e,t){t[e.name]=this.value},t.prototype.setEditValue=function(e,t){this.value=e[t.name]},Object.defineProperty(t.prototype,"value",{get:function(){var e=this.getIdProperty();return this.view.getItems().map(function(t){var n=Q.deepClone(t),r=n[e];return r&&"`"==r.toString().charAt(0)&&delete n[e],n})},set:function(e){var t=this,n=this.getIdProperty();this.view.setItems((e||[]).map(function(e){var r=Q.deepClone(e);return null==r[n]&&(r[n]="`"+t.getNextId()),r}),!0)},enumerable:!0,configurable:!0}),t.prototype.getGridCanLoad=function(){return!1},t.prototype.usePager=function(){return!1},t.prototype.getInitialTitle=function(){return null},t.prototype.createQuickSearchInput=function(){},t=__decorate([Serenity.Decorators.registerClass([Serenity.IGetEditValue,Serenity.ISetEditValue]),Serenity.Decorators.editor(),Serenity.Decorators.element("<div/>")],t)}(Serenity.EntityGrid);e.GridEditorBase=t;
}(t=e.Common||(e.Common={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.getIdProperty=function(){return"__id"},t.prototype.destroy=function(){this.onSave=null,this.onDelete=null,e.prototype.destroy.call(this)},t.prototype.updateInterface=function(){e.prototype.updateInterface.call(this),this.applyChangesButton&&this.applyChangesButton.hide()},t.prototype.saveHandler=function(e,t){this.onSave&&this.onSave(e,t)},t.prototype.deleteHandler=function(e,t){this.onDelete&&this.onDelete(e,t)},t=__decorate([Serenity.Decorators.registerClass()],t)}(Serenity.EntityDialog);e.GridEditorDialog=t}(t=e.Common||(e.Common={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(t){function n(){for(var t=[],n=0,r=e.Administration.LanguageRow.getLookup().items;n<r.length;n++){var i=r[n];"en"!==i.LanguageId&&t.push([i.Id.toString(),i.LanguageName])}return t}t.getValue=n}(t=e.LanguageList||(e.LanguageList={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.formKey="Administration.Language",t}(Serenity.PrefixedContext);e.LanguageForm=t,[["LanguageId",function(){return Serenity.StringEditor}],["LanguageName",function(){return Serenity.StringEditor}]].forEach(function(e){return Object.defineProperty(t.prototype,e[0],{get:function(){return this.w(e[0],e[1]())},enumerable:!0,configurable:!0})})}(t=e.Administration||(e.Administration={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t;!function(e){function t(){return Q.getLookup("Administration.Language")}e.idProperty="Id",e.nameProperty="LanguageName",e.localTextPrefix="Administration.Language",e.lookupKey="Administration.Language",e.getLookup=t;var n;!function(e){}(n=e.Fields||(e.Fields={})),["Id","LanguageId","LanguageName"].forEach(function(e){return n[e]=e})}(t=e.LanguageRow||(e.LanguageRow={}))}(t=e.Administration||(e.Administration={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t;!function(e){e.baseUrl="Administration/Language";var t;!function(e){}(t=e.Methods||(e.Methods={})),["Create","Update","Delete","Retrieve","List"].forEach(function(n){e[n]=function(t,r,i){return Q.serviceRequest(e.baseUrl+"/"+n,t,r,i)},t[n]=e.baseUrl+"/"+n})}(t=e.LanguageService||(e.LanguageService={}))}(t=e.Administration||(e.Administration={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.formKey="Administration.Role",t}(Serenity.PrefixedContext);e.RoleForm=t,[["RoleName",function(){return Serenity.StringEditor}]].forEach(function(e){return Object.defineProperty(t.prototype,e[0],{get:function(){return this.w(e[0],e[1]())},enumerable:!0,configurable:!0})})}(t=e.Administration||(e.Administration={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t;!function(e){e.idProperty="RolePermissionId",e.nameProperty="PermissionKey",e.localTextPrefix="Administration.RolePermission";var t;!function(e){}(t=e.Fields||(e.Fields={})),["RolePermissionId","RoleId","PermissionKey","RoleRoleName"].forEach(function(e){return t[e]=e})}(t=e.RolePermissionRow||(e.RolePermissionRow={}))}(t=e.Administration||(e.Administration={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t;!function(e){e.baseUrl="Administration/RolePermission";var t;!function(e){}(t=e.Methods||(e.Methods={})),["Update","List"].forEach(function(n){e[n]=function(t,r,i){return Q.serviceRequest(e.baseUrl+"/"+n,t,r,i)},t[n]=e.baseUrl+"/"+n})}(t=e.RolePermissionService||(e.RolePermissionService={}))}(t=e.Administration||(e.Administration={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t;!function(e){function t(){return Q.getLookup("Administration.Role")}e.idProperty="RoleId",e.nameProperty="RoleName",e.localTextPrefix="Administration.Role",e.lookupKey="Administration.Role",e.getLookup=t;var n;!function(e){}(n=e.Fields||(e.Fields={})),["RoleId","RoleName"].forEach(function(e){return n[e]=e})}(t=e.RoleRow||(e.RoleRow={}))}(t=e.Administration||(e.Administration={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t;!function(e){e.baseUrl="Administration/Role";var t;!function(e){}(t=e.Methods||(e.Methods={})),["Create","Update","Delete","Retrieve","List"].forEach(function(n){e[n]=function(t,r,i){return Q.serviceRequest(e.baseUrl+"/"+n,t,r,i)},t[n]=e.baseUrl+"/"+n})}(t=e.RoleService||(e.RoleService={}))}(t=e.Administration||(e.Administration={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t;!function(e){e.baseUrl="Administration/Translation";var t;!function(e){}(t=e.Methods||(e.Methods={})),["List","Update"].forEach(function(n){e[n]=function(t,r,i){return Q.serviceRequest(e.baseUrl+"/"+n,t,r,i)},t[n]=e.baseUrl+"/"+n})}(t=e.TranslationService||(e.TranslationService={}))}(t=e.Administration||(e.Administration={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.formKey="Administration.User",t}(Serenity.PrefixedContext);e.UserForm=t,[["Username",function(){return Serenity.StringEditor}],["DisplayName",function(){return Serenity.StringEditor}],["Email",function(){return Serenity.EmailEditor}],["UserImage",function(){return Serenity.ImageUploadEditor}],["Password",function(){return Serenity.PasswordEditor}],["PasswordConfirm",function(){return Serenity.PasswordEditor}],["Source",function(){return Serenity.StringEditor}]].forEach(function(e){return Object.defineProperty(t.prototype,e[0],{get:function(){return this.w(e[0],e[1]())},enumerable:!0,configurable:!0})})}(t=e.Administration||(e.Administration={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t;!function(e){e.idProperty="UserPermissionId",e.nameProperty="PermissionKey",e.localTextPrefix="Administration.UserPermission";var t;!function(e){}(t=e.Fields||(e.Fields={})),["UserPermissionId","UserId","PermissionKey","Granted","Username","User"].forEach(function(e){return t[e]=e})}(t=e.UserPermissionRow||(e.UserPermissionRow={}))}(t=e.Administration||(e.Administration={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t;!function(e){e.baseUrl="Administration/UserPermission";var t;!function(e){}(t=e.Methods||(e.Methods={})),["Update","List","ListRolePermissions","ListPermissionKeys"].forEach(function(n){e[n]=function(t,r,i){return Q.serviceRequest(e.baseUrl+"/"+n,t,r,i)},t[n]=e.baseUrl+"/"+n})}(t=e.UserPermissionService||(e.UserPermissionService={}))}(t=e.Administration||(e.Administration={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t;!function(e){e.idProperty="UserRoleId",e.localTextPrefix="Administration.UserRole";var t;!function(e){}(t=e.Fields||(e.Fields={})),["UserRoleId","UserId","RoleId","Username","User"].forEach(function(e){return t[e]=e})}(t=e.UserRoleRow||(e.UserRoleRow={}))}(t=e.Administration||(e.Administration={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t;!function(e){e.baseUrl="Administration/UserRole";var t;!function(e){}(t=e.Methods||(e.Methods={})),["Update","List"].forEach(function(n){e[n]=function(t,r,i){return Q.serviceRequest(e.baseUrl+"/"+n,t,r,i)},t[n]=e.baseUrl+"/"+n})}(t=e.UserRoleService||(e.UserRoleService={}))}(t=e.Administration||(e.Administration={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t;!function(e){function t(){return Q.getLookup("Administration.User")}e.idProperty="UserId",e.isActiveProperty="IsActive",e.nameProperty="Username",e.localTextPrefix="Administration.User",e.lookupKey="Administration.User",e.getLookup=t;var n;!function(e){}(n=e.Fields||(e.Fields={})),["UserId","Username","Source","PasswordHash","PasswordSalt","DisplayName","Email","UserImage","LastDirectoryUpdate","IsActive","Password","PasswordConfirm","InsertUserId","InsertDate","UpdateUserId","UpdateDate"].forEach(function(e){return n[e]=e})}(t=e.UserRow||(e.UserRow={}))}(t=e.Administration||(e.Administration={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t;!function(e){e.baseUrl="Administration/User";var t;!function(e){}(t=e.Methods||(e.Methods={})),["Create","Update","Delete","Undelete","Retrieve","List"].forEach(function(n){e[n]=function(t,r,i){return Q.serviceRequest(e.baseUrl+"/"+n,t,r,i)},t[n]=e.baseUrl+"/"+n})}(t=e.UserService||(e.UserService={}))}(t=e.Administration||(e.Administration={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t;!function(e){e.idProperty="UserPreferenceId",e.nameProperty="Name",e.localTextPrefix="Common.UserPreference";var t;!function(e){}(t=e.Fields||(e.Fields={})),["UserPreferenceId","UserId","PreferenceType","Name","Value"].forEach(function(e){return t[e]=e})}(t=e.UserPreferenceRow||(e.UserPreferenceRow={}))}(t=e.Common||(e.Common={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t;!function(e){e.baseUrl="Common/UserPreference";var t;!function(e){}(t=e.Methods||(e.Methods={})),["Update","Retrieve"].forEach(function(n){e[n]=function(t,r,i){return Q.serviceRequest(e.baseUrl+"/"+n,t,r,i)},t[n]=e.baseUrl+"/"+n})}(t=e.UserPreferenceService||(e.UserPreferenceService={}))}(t=e.Common||(e.Common={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.formKey="Membership.ChangePassword",t}(Serenity.PrefixedContext);e.ChangePasswordForm=t,[["OldPassword",function(){return Serenity.PasswordEditor}],["NewPassword",function(){return Serenity.PasswordEditor}],["ConfirmPassword",function(){return Serenity.PasswordEditor}]].forEach(function(e){return Object.defineProperty(t.prototype,e[0],{get:function(){return this.w(e[0],e[1]())},enumerable:!0,configurable:!0})})}(t=e.Membership||(e.Membership={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.formKey="Membership.ForgotPassword",t}(Serenity.PrefixedContext);e.ForgotPasswordForm=t,[["Email",function(){return Serenity.EmailEditor}]].forEach(function(e){return Object.defineProperty(t.prototype,e[0],{get:function(){return this.w(e[0],e[1]())},enumerable:!0,configurable:!0})})}(t=e.Membership||(e.Membership={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.formKey="Membership.Login",t}(Serenity.PrefixedContext);e.LoginForm=t,[["Username",function(){return Serenity.StringEditor}],["Password",function(){return Serenity.PasswordEditor}]].forEach(function(e){return Object.defineProperty(t.prototype,e[0],{get:function(){return this.w(e[0],e[1]())},enumerable:!0,configurable:!0})})}(t=e.Membership||(e.Membership={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.formKey="Membership.ResetPassword",t}(Serenity.PrefixedContext);e.ResetPasswordForm=t,[["NewPassword",function(){return Serenity.PasswordEditor}],["ConfirmPassword",function(){return Serenity.PasswordEditor}]].forEach(function(e){return Object.defineProperty(t.prototype,e[0],{get:function(){return this.w(e[0],e[1]())},enumerable:!0,configurable:!0})})}(t=e.Membership||(e.Membership={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.formKey="Membership.SignUp",t}(Serenity.PrefixedContext);e.SignUpForm=t,[["DisplayName",function(){return Serenity.StringEditor}],["Email",function(){return Serenity.EmailEditor}],["ConfirmEmail",function(){return Serenity.EmailEditor}],["Password",function(){return Serenity.PasswordEditor}],["ConfirmPassword",function(){return Serenity.PasswordEditor}]].forEach(function(e){return Object.defineProperty(t.prototype,e[0],{get:function(){return this.w(e[0],e[1]())},enumerable:!0,configurable:!0})})}(t=e.Membership||(e.Membership={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(e){function t(t,n){e.call(this,t),n=Q.coalesce(n,"en"),this.change(function(e){$.cookie("LanguagePreference",t.val(),{path:Q.Config.applicationPath,expires:365}),window.location.reload(!0)}),Q.getLookupAsync("Administration.Language").then(function(e){if(!Q.any(e.items,function(e){return e.LanguageId===n})){var r=n.lastIndexOf("-");r>=0?(n=n.substr(0,r),Q.any(e.items,function(e){return e.LanguageId===n})||(n="en")):n="en"}for(var i=0,o=e.items;i<o.length;i++){var a=o[i];Q.addOption(t,a.LanguageId,a.LanguageName)}t.val(n)})}return __extends(t,e),t}(Serenity.Widget);e.LanguageSelection=t}(t=e.Common||(e.Common={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(e){function t(t,n){var r=this;e.call(this,t),new Serenity.QuickSearchInput(t,{onSearch:function(e,t,n){r.updateMatchFlags(t),n(!0)}}),this.menuUL=n}return __extends(t,e),t.prototype.updateMatchFlags=function(e){var t=this.menuUL.find("li").removeClass("non-match");if(e=Q.trimToNull(e),null==e)return t.show(),void t.removeClass("expanded");for(var n=e.replace(","," ").split(" ").filter(function(e){return!Q.isTrimmedEmpty(e)}),r=0;r<n.length;r++)n[r]=Q.trimToNull(Select2.util.stripDiacritics(n[r]).toUpperCase());var i=t;i.each(function(e,t){for(var r=$(t),i=Select2.util.stripDiacritics(Q.coalesce(r.text(),"").toUpperCase()),o=0,a=n;o<a.length;o++){var s=a[o];if(null!=s&&-1===i.indexOf(s)){r.addClass("non-match");break}}});var o=i.not(".non-match"),a=o.parents("li").add(o),s=t.not(a);s.hide().addClass("non-match"),a.show(),t.addClass("expanded")},t}(Serenity.Widget);e.SidebarSearch=t}(t=e.Common||(e.Common={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(e){function t(t){var n=this;e.call(this,t),this.change(function(e){$.cookie("ThemePreference",t.val(),{path:Q.Config.applicationPath,expires:365}),$("body").removeClass("skin-"+n.getCurrentTheme()),$("body").addClass("skin-"+t.val())}),Q.addOption(t,"blue",Q.text("Site.Layout.ThemeBlue")),Q.addOption(t,"blue-light",Q.text("Site.Layout.ThemeBlueLight")),Q.addOption(t,"purple",Q.text("Site.Layout.ThemePurple")),Q.addOption(t,"purple-light",Q.text("Site.Layout.ThemePurpleLight")),Q.addOption(t,"red",Q.text("Site.Layout.ThemeRed")),Q.addOption(t,"red-light",Q.text("Site.Layout.ThemeRedLight")),Q.addOption(t,"green",Q.text("Site.Layout.ThemeGreen")),Q.addOption(t,"green-light",Q.text("Site.Layout.ThemeGreenLight")),Q.addOption(t,"yellow",Q.text("Site.Layout.ThemeYellow")),Q.addOption(t,"yellow-light",Q.text("Site.Layout.ThemeYellowLight")),Q.addOption(t,"black",Q.text("Site.Layout.ThemeBlack")),Q.addOption(t,"black-light",Q.text("Site.Layout.ThemeBlackLight")),t.val(this.getCurrentTheme())}return __extends(t,e),t.prototype.getCurrentTheme=function(){var e=Q.first(($("body").attr("class")||"").split(" "),function(e){return Q.startsWith(e,"skin-")});return e?e.substr(5):"blue"},t}(Serenity.Widget);e.ThemeSelection=t}(t=e.Common||(e.Common={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t;!function(e){function t(e,t,n){return e.map(function(e){var r={dataKey:e.id||e.field,title:e.name||""};n&&null!=n[r.dataKey]&&(r.title=n[r.dataKey]);var i={};return(e.cssClass||"").indexOf("align-right")>=0?i.halign="right":(e.cssClass||"").indexOf("align-center")>=0&&(i.halign="center"),t[r.dataKey]=i,r})}function n(e,t,n){var r=document.createElement("span"),i=0;return e.map(function(e){for(var o={},a=0;a<n.length;a++){var s=n[a],u=s.field||"",c=t[a],l=void 0;if(s.formatter)l=s.formatter(i,a,e[u],s,e);else{if(!s.format){o[c]=e[u];continue}l=s.format({row:i,cell:a,item:e,value:e[u]})}!l||l.indexOf("<")<0&&l.indexOf("&")<0?o[c]=l:(r.innerHTML=l,1==r.children.length&&$(r.children[0]).is(":input")?o[c]=$(r.children[0]).val():1==r.children.length&&$(r.children).is(".check-box")?o[c]=$(r.children).hasClass("checked")?"X":"":o[c]=r.textContent||"")}return i++,o})}function r(e){var r=e.grid;if(e.onViewSubmit()){a();var i=Q.deepClone(r.view.params);i.Take=0,i.Skip=0;var o=r.view.sortBy;null!=o&&(i.Sort=o);var s=r.slickGrid.getColumns();s=s.filter(function(e){return"__select__"!==e.id}),i.IncludeColumns=[];for(var u=0,c=s;u<c.length;u++){var l=c[u];i.IncludeColumns.push(l.id||l.field)}Q.serviceCall({url:r.view.url,request:i,onSuccess:function(i){var o=new jsPDF("l","pt"),a=s,u={},c=t(a,u,e.columnTitles),l=c.map(function(e){return e.dataKey}),d=i.Entities||[],f=n(d,l,a);o.setFontSize(e.titleFontSize||10),o.setFontStyle("bold");var p=e.reportTitle||r.getTitle()||"Report";o.autoTableText(p,o.internal.pageSize.width/2,e.titleTop||25,{halign:"center"});var m="{{T}}",h=null==e.pageNumbers||e.pageNumbers,g=$.extend({margin:{top:25,left:25,right:25,bottom:h?25:30},startY:60,styles:{fontSize:8,overflow:"linebreak",cellPadding:2,valign:"middle"},columnStyles:u},e.tableOptions);if(h){var v=function(e){var t=e.pageCount;"function"==typeof o.putTotalPages&&(t=t+" / "+m),o.autoTableText(t,o.internal.pageSize.width/2,o.internal.pageSize.height-g.margin.bottom,{halign:"center"})};g.afterPageContent=v}if(o.autoTable(c,f,g),"function"==typeof o.putTotalPages&&o.putTotalPages(m),!e.output||"file"==e.output){var y=e.reportTitle||"{0}_{1}.pdf";return y=Q.format(y,r.getTitle()||"report",Q.formatDate(new Date,"yyyyMMdd_HHmm")),void o.save(y)}e.autoPrint&&o.autoPrint();var S=e.output;S="dataurlnewwindow",o.output(S)}})}}function i(e){return{title:e.title||"",hint:e.hint||"PDF",cssClass:"export-pdf-button",onClick:function(){return r(e)},separator:e.separator}}function o(){if("undefined"==typeof jsPDF){var e=$("jsPDFScript");e.length>0||$("<script/>").attr("type","text/javascript").attr("id","jsPDFScript").attr("src",Q.resolveUrl("~/Scripts/jspdf.min.js")).appendTo(document.head)}}function a(){if(o(),"undefined"!=typeof jsPDF&&"undefined"!=typeof jsPDF.API&&"undefined"==typeof jsPDF.API.autoTable){var e=$("jsPDFAutoTableScript");e.length>0||$("<script/>").attr("type","text/javascript").attr("id","jsPDFAutoTableScript").attr("src",Q.resolveUrl("~/Scripts/jspdf.plugin.autotable.min.js")).appendTo(document.head)}}e.exportToPdf=r,e.createToolButton=i}(t=e.PdfExportHelper||(e.PdfExportHelper={}))}(t=e.Common||(e.Common={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(t){function n(e){t.call(this,e),this.updateInterface(),this.loadReport(this.options.reportKey)}return __extends(n,t),n.prototype.getDialogButtons=function(){return null},n.prototype.createPropertyGrid=function(){this.propertyGrid&&this.byId("PropertyGrid").html("").attr("class",""),this.propertyGrid=new Serenity.PropertyGrid(this.byId("PropertyGrid"),{idPrefix:this.idPrefix,useCategories:!0,items:this.propertyItems}).init(null)},n.prototype.loadReport=function(e){var t=this;Q.serviceCall({url:Q.resolveUrl("~/Report/Retrieve"),request:{ReportKey:e},onSuccess:function(e){t.report=e,t.element.dialog().dialog("option","title",t.report.Title),t.createPropertyGrid(),t.propertyGrid.load(t.report.InitialSettings||{}),t.updateInterface(),t.dialogOpen()}})},n.prototype.updateInterface=function(){this.toolbar.findButton("print-preview-button").toggle(this.report&&!this.report.IsDataOnlyReport),this.toolbar.findButton("export-pdf-button").toggle(this.report&&!this.report.IsDataOnlyReport),this.toolbar.findButton("export-xlsx-button").toggle(this.report&&this.report.IsDataOnlyReport)},n.prototype.executeReport=function(t,n,r){if(this.validateForm()){var i={};this.propertyGrid.save(i),e.ReportHelper.execute({download:r,reportKey:this.report.ReportKey,extension:n,target:t,params:i})}},n.prototype.getToolbarButtons=function(){var e=this;return[{title:"Preview",cssClass:"print-preview-button",onClick:function(){return e.executeReport("_blank",null,!1)}},{title:"PDF",cssClass:"export-pdf-button",onClick:function(){return e.executeReport("_blank","pdf",!0)}},{title:"Excel",cssClass:"export-xlsx-button",onClick:function(){return e.executeReport("_blank","xlsx",!0)}}]},n}(Serenity.TemplatedDialog);e.ReportDialog=t}(t=e.Common||(e.Common={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t;!function(e){function t(t){return{title:Q.coalesce(t.title,"Report"),cssClass:Q.coalesce(t.cssClass,"print-button"),icon:t.icon,onClick:function(){e.execute(t)}}}function n(e){var t=e.getParams?e.getParams():e.params;Q.postToUrl({url:"~/Report/"+(e.download?"Download":"Render"),params:{key:e.reportKey,ext:Q.coalesce(e.extension,"pdf"),opt:t?$.toJSON(t):""},target:Q.coalesce(e.target,"_blank")})}e.createToolButton=t,e.execute=n}(t=e.ReportHelper||(e.ReportHelper={}))}(t=e.Common||(e.Common={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(t){function n(e){var n=this;t.call(this,e),$(".report-link",e).click(function(e){return n.reportLinkClick(e)}),$("div.line",e).click(function(e){return n.categoryClick(e)}),new Serenity.QuickSearchInput($(".s-QuickSearchBar input",e),{onSearch:function(e,t,r){n.updateMatchFlags(t),r(!0)}})}return __extends(n,t),n.prototype.updateMatchFlags=function(e){var t=$(".report-list",this.element).find("li").removeClass("non-match");if(e=Q.trimToNull(e),!e)return t.children("ul").hide(),void t.show().removeClass("expanded");e=Select2.util.stripDiacritics(e).toUpperCase();var n=t.filter(".report-item");n.each(function(t,n){var r=$(n),i=Select2.util.stripDiacritics(Q.coalesce(r.text(),"").toUpperCase());i.indexOf(e)<0&&r.addClass("non-match")});var r=n.not(".non-match"),i=r.parents("li").add(r),o=t.not(i);o.hide().addClass("non-match"),i.show(),i.length<=100&&(t.children("ul").show(),t.addClass("expanded"))},n.prototype.categoryClick=function(e){var t=$(e.target).closest("li");t.hasClass("expanded")?(t.find("ul").hide("fast"),t.removeClass("expanded"),t.find("li").removeClass("expanded")):(t.addClass("expanded"),t.children("ul").show("fast"),1!==t.children("ul").children("li").length||t.children("ul").children("li").hasClass("expanded")||t.children("ul").children("li").children(".line").click())},n.prototype.reportLinkClick=function(t){t.preventDefault(),new e.ReportDialog({reportKey:$(t.target).data("key")}).dialogOpen()},n}(Serenity.Widget);e.ReportPage=t}(t=e.Common||(e.Common={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){Q.Config.responsiveDialogs=!0,Q.Config.rootNamespaces.push("SereneXamarin")}(t=e.ScriptInitialization||(e.ScriptInitialization={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(){function t(){}return t.prototype.getItem=function(t){var n;return e.UserPreferenceService.Retrieve({PreferenceType:"UserPreferenceStorage",Name:t},function(e){return n=e.Value},{async:!1}),n},t.prototype.setItem=function(t,n){e.UserPreferenceService.Update({PreferenceType:"UserPreferenceStorage",Name:t,Value:n})},t}();e.UserPreferenceStorage=t}(t=e.Common||(e.Common={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(t){function n(n){var r=this;t.call(this,n),this.form=new e.ChangePasswordForm(this.idPrefix),this.form.NewPassword.addValidationRule(this.uniqueName,function(e){return r.form.w("ConfirmPassword",Serenity.PasswordEditor).value.length<7?Q.format(Q.text("Validation.MinRequiredPasswordLength"),7):void 0}),this.form.ConfirmPassword.addValidationRule(this.uniqueName,function(e){return r.form.ConfirmPassword.value!==r.form.NewPassword.value?Q.text("Validation.PasswordConfirm"):void 0}),this.byId("SubmitButton").click(function(e){if(e.preventDefault(),r.validateForm()){var t=r.getSaveEntity();Q.serviceCall({url:Q.resolveUrl("~/Account/ChangePassword"),request:t,onSuccess:function(e){Q.information(Q.text("Forms.Membership.ChangePassword.Success"),function(){window.location.href=Q.resolveUrl("~/")})}})}})}return __extends(n,t),n.prototype.getFormKey=function(){return e.ChangePasswordForm.formKey},n=__decorate([Serenity.Decorators.registerClass()],n)}(Serenity.PropertyPanel);e.ChangePasswordPanel=t}(t=e.Membership||(e.Membership={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(t){function n(n){var r=this;t.call(this,n),this.form=new e.ForgotPasswordForm(this.idPrefix),this.byId("SubmitButton").click(function(e){if(e.preventDefault(),r.validateForm()){var t=r.getSaveEntity();Q.serviceCall({url:Q.resolveUrl("~/Account/ForgotPassword"),request:t,onSuccess:function(e){Q.information(Q.text("Forms.Membership.ForgotPassword.Success"),function(){window.location.href=Q.resolveUrl("~/")})}})}})}return __extends(n,t),n.prototype.getFormKey=function(){return e.ForgotPasswordForm.formKey},n=__decorate([Serenity.Decorators.registerClass()],n)}(Serenity.PropertyPanel);e.ForgotPasswordPanel=t}(t=e.Membership||(e.Membership={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(t){function n(n){var r=this;t.call(this,n),$(function(){$("body").vegas({delay:1e4,cover:!0,overlay:Q.resolveUrl("~/scripts/vegas/overlays/01.png"),slides:[{src:Q.resolveUrl("~/content/site/slides/slide1.jpg"),transition:"fade"},{src:Q.resolveUrl("~/content/site/slides/slide2.jpg"),transition:"fade"},{src:Q.resolveUrl("~/content/site/slides/slide3.jpg"),transition:"zoomOut"},{src:Q.resolveUrl("~/content/site/slides/slide4.jpg"),transition:"blur"},{src:Q.resolveUrl("~/content/site/slides/slide5.jpg"),transition:"swirlLeft"}]})}),this.form=new e.LoginForm(this.idPrefix),this.byId("LoginButton").click(function(e){if(e.preventDefault(),r.validateForm()){var t=r.getSaveEntity();Q.serviceCall({url:Q.resolveUrl("~/Account/Login"),request:t,onSuccess:function(e){var t=Q.parseQueryString(),n=t.returnUrl||t.ReturnUrl;n?window.location.href=n:window.location.href=Q.resolveUrl("~/")}})}})}return __extends(n,t),n.prototype.getFormKey=function(){return e.LoginForm.formKey},n=__decorate([Serenity.Decorators.registerClass()],n)}(Serenity.PropertyPanel);e.LoginPanel=t}(t=e.Membership||(e.Membership={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(t){function n(n){var r=this;t.call(this,n),this.form=new e.ResetPasswordForm(this.idPrefix),this.form.NewPassword.addValidationRule(this.uniqueName,function(e){return r.form.ConfirmPassword.value.length<7?Q.format(Q.text("Validation.MinRequiredPasswordLength"),7):void 0}),this.form.ConfirmPassword.addValidationRule(this.uniqueName,function(e){return r.form.ConfirmPassword.value!==r.form.NewPassword.value?Q.text("Validation.PasswordConfirm"):void 0}),this.byId("SubmitButton").click(function(e){if(e.preventDefault(),r.validateForm()){var t=r.getSaveEntity();t.Token=r.byId("Token").val(),Q.serviceCall({url:Q.resolveUrl("~/Account/ResetPassword"),request:t,onSuccess:function(e){Q.information(Q.text("Forms.Membership.ResetPassword.Success"),function(){window.location.href=Q.resolveUrl("~/Account/Login")})}})}})}return __extends(n,t),n.prototype.getFormKey=function(){return e.ResetPasswordForm.formKey},n=__decorate([Serenity.Decorators.registerClass()],n)}(Serenity.PropertyPanel);e.ResetPasswordPanel=t}(t=e.Membership||(e.Membership={}))}(SereneXamarin||(SereneXamarin={}));var SereneXamarin;!function(e){var t;!function(e){var t=function(t){function n(n){var r=this;t.call(this,n),this.form=new e.SignUpForm(this.idPrefix),this.form.ConfirmEmail.addValidationRule(this.uniqueName,function(e){return r.form.ConfirmEmail.value!==r.form.Email.value?Q.text("Validation.EmailConfirm"):void 0}),this.form.ConfirmPassword.addValidationRule(this.uniqueName,function(e){return r.form.ConfirmPassword.value!==r.form.Password.value?Q.text("Validation.PasswordConfirm"):void 0}),this.byId("SubmitButton").click(function(e){e.preventDefault(),r.validateForm()&&Q.serviceCall({url:Q.resolveUrl("~/Account/SignUp"),request:{DisplayName:r.form.DisplayName.value,Email:r.form.Email.value,Password:r.form.Password.value},onSuccess:function(e){Q.information(Q.text("Forms.Membership.SignUp.Success"),function(){window.location.href=Q.resolveUrl("~/")})}})})}return __extends(n,t),n.prototype.getFormKey=function(){return e.SignUpForm.formKey},n=__decorate([Serenity.Decorators.registerClass()],n)}(Serenity.PropertyPanel);e.SignUpPanel=t}(t=e.Membership||(e.Membership={}))}(SereneXamarin||(SereneXamarin={}));



